(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-75b1b42a"],{"7a7d":function(t,o,i){"use strict";i.r(o);var s=function(){var t=this,o=t.$createElement,i=t._self._c||o;return i("div",{staticClass:"shop-cart"},[i("div",{staticClass:"top-nav"},[i("van-nav-bar",{attrs:{fixed:"",title:"购物车","right-text":"删除"},on:{"click-right":t.onRemove}})],1),t.isLoading?[t.goodsList.length?i("div",{staticClass:"card-list"},[i("van-checkbox-group",{ref:"checkboxGroup",on:{change:t.onChange},model:{value:t.goodsCheckArr,callback:function(o){t.goodsCheckArr=o},expression:"goodsCheckArr"}},t._l(t.goodsList,(function(o){return i("div",{key:o.id,staticClass:"card-box"},[i("van-checkbox",{attrs:{name:o.id}}),i("GoodCard",{attrs:{title:o.title,desc:o.desc,tags:o.tags,price:o.price,images:o.images,id:o.id,num:t.goodsData[o.id]}})],1)})),0)],1):i("div",{staticClass:"card-none"},[i("img",{attrs:{src:"https://duyi-bucket.oss-cn-beijing.aliyuncs.com/img/shopping_bg.jpg"}})]),i("van-submit-bar",{attrs:{price:t.totalPrice,"button-text":"去结算"},on:{submit:t.onSubmit}},[i("van-checkbox",{on:{click:t.selectAll},model:{value:t.all,callback:function(o){t.all=o},expression:"all"}},[t._v("全选")])],1)]:i("van-loading",{attrs:{size:"110px",type:"spinner"}})],2)},e=[],a=i("5530"),n=(i("b64b"),i("4de4"),i("159b"),i("2f62")),c=i("b893"),r=i("5a4a"),l=i("d654"),d={components:{GoodCard:l["a"]},data:function(){return{all:!0,goodsList:[],goodsCheckArr:[],totalPrice:0,isLoading:!1,firstRender:!0}},watch:{goodsData:{handler:function(){var t=this,o=Object(c["b"])("goods")||[],i=Object.keys(o);r["a"].getGoodsByIds(i).then((function(o){if(t.goodsList=o.list,t.firstRender){t.goodsCheckArr.length=0;for(var i=0;i<o.list.length;i+=1)t.goodsCheckArr.push(o.list[i].id);t.firstRender=!1}t.initPrice(t.goodsCheckArr),0===t.goodsCheckArr.length&&(t.all=!1),setTimeout((function(){t.isLoading=!0}),250)}))},immediate:!0},goodsDataLen:function(){var t=this,o=this.goodsCheckArr.filter((function(o){return t.goodsData[o]}));this.goodsCheckArr=o,this.onChange(o)}},computed:Object(a["a"])(Object(a["a"])({},Object(n["c"])(["goodsData"])),Object(n["b"])(["goodsDataLen"])),methods:{onChange:function(t){this.goodsCheckArr.length===this.goodsDataLen?this.all=!0:this.all=!1,this.initPrice(t)},onRemove:function(){var t=this;this.all?this.$dialog.confirm({message:"您是否要删除全部的商品",confirmButtonColor:"#1989fa",className:"dialog"}).then((function(){t.$store.commit("removeStorageData",{key:"goods"})}),(function(){})):0!==this.goodsCheckArr.length?this.$dialog.confirm({message:"您是否要已选中的商品",confirmButtonColor:"#1989fa",className:"dialog"}).then((function(){t.$store.commit("removeStorageData",{key:"goods",value:t.goodsCheckArr})}),(function(){})):this.$toast.fail("您没有要删除的商品")},selectAll:function(){this.$refs.checkboxGroup?this.$refs.checkboxGroup.toggleAll(this.all):(this.$toast.fail("您没有商品"),this.all=!1)},onSubmit:function(){},initPrice:function(t){var o=this,i=0;t.forEach((function(t){o.goodsList.forEach((function(s){s.id===t&&(i+=s.price*o.goodsData[t])}))})),this.totalPrice=100*i}}},h=d,g=(i("cfc9"),i("2877")),u=Object(g["a"])(h,s,e,!1,null,"38503dae",null);o["default"]=u.exports},"9fbc":function(t,o,i){},cfc9:function(t,o,i){"use strict";i("9fbc")}}]);
//# sourceMappingURL=chunk-75b1b42a.7e17c387.js.map
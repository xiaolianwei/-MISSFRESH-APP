{"version":3,"sources":["webpack:///./src/views/layout/Cart.vue?152e","webpack:///src/views/layout/Cart.vue","webpack:///./src/views/layout/Cart.vue?d00b","webpack:///./src/views/layout/Cart.vue","webpack:///./src/views/layout/Cart.vue?88f6"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","on","onRemove","goodsList","ref","onChange","model","value","callback","$$v","goodsCheckArr","expression","_l","good","key","id","title","desc","tags","price","images","goodsData","totalPrice","onSubmit","selectAll","all","_v","staticRenderFns","components","GoodCard","data","isLoading","firstRender","watch","handler","setTimeout","immediate","goodsDataLen","arr","computed","methods","length","initPrice","$dialog","confirm","message","confirmButtonColor","className","$toast","fail","$refs","checkboxGroup","toggleAll","forEach","goodObj","component"],"mappings":"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","file":"js/chunk-75b1b42a.7e17c387.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"shop-cart\"},[_c('div',{staticClass:\"top-nav\"},[_c('van-nav-bar',{attrs:{\"fixed\":\"\",\"title\":\"购物车\",\"right-text\":\"删除\"},on:{\"click-right\":_vm.onRemove}})],1),(_vm.isLoading)?[(_vm.goodsList.length)?_c('div',{staticClass:\"card-list\"},[_c('van-checkbox-group',{ref:\"checkboxGroup\",on:{\"change\":_vm.onChange},model:{value:(_vm.goodsCheckArr),callback:function ($$v) {_vm.goodsCheckArr=$$v},expression:\"goodsCheckArr\"}},_vm._l((_vm.goodsList),function(good){return _c('div',{key:good.id,staticClass:\"card-box\"},[_c('van-checkbox',{attrs:{\"name\":good.id}}),_c('GoodCard',{attrs:{\"title\":good.title,\"desc\":good.desc,\"tags\":good.tags,\"price\":good.price,\"images\":good.images,\"id\":good.id,\"num\":_vm.goodsData[good.id]}})],1)}),0)],1):_c('div',{staticClass:\"card-none\"},[_c('img',{attrs:{\"src\":\"https://duyi-bucket.oss-cn-beijing.aliyuncs.com/img/shopping_bg.jpg\"}})]),_c('van-submit-bar',{attrs:{\"price\":_vm.totalPrice,\"button-text\":\"去结算\"},on:{\"submit\":_vm.onSubmit}},[_c('van-checkbox',{on:{\"click\":_vm.selectAll},model:{value:(_vm.all),callback:function ($$v) {_vm.all=$$v},expression:\"all\"}},[_vm._v(\"全选\")])],1)]:_c('van-loading',{attrs:{\"size\":\"110px\",\"type\":\"spinner\"}})],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"shop-cart\">\n    <div class=\"top-nav\">\n      <van-nav-bar\n        fixed\n        title=\"购物车\"\n        right-text=\"删除\"\n        @click-right=\"onRemove\"\n      />\n    </div>\n    <template v-if=\"isLoading\">\n      <div class=\"card-list\" v-if=\"goodsList.length\">\n        <van-checkbox-group @change=\"onChange\" v-model=\"goodsCheckArr\" ref=\"checkboxGroup\">\n          <div class=\"card-box\" v-for=\"good in goodsList\" :key=\"good.id\">\n            <van-checkbox :name=\"good.id\" />\n            <GoodCard\n              :title=\"good.title\"\n              :desc=\"good.desc\"\n              :tags=\"good.tags\"\n              :price=\"good.price\"\n              :images=\"good.images\"\n              :id=\"good.id\"\n              :num=\"goodsData[good.id]\"\n            />\n          </div>\n        </van-checkbox-group>\n      </div>\n      <div class=\"card-none\" v-else>\n        <img\n          src=\"https://duyi-bucket.oss-cn-beijing.aliyuncs.com/img/shopping_bg.jpg\"\n        />\n      </div>\n      <van-submit-bar :price=\"totalPrice\" button-text=\"去结算\" @submit=\"onSubmit\">\n        <van-checkbox @click=\"selectAll\" v-model=\"all\">全选</van-checkbox>\n      </van-submit-bar>\n    </template>\n    <van-loading v-else size=\"110px\" type=\"spinner\" />\n  </div>\n</template>\n\n<script>\nimport { mapState, mapGetters } from 'vuex';\nimport { getStorage } from '@/utils/tools';\nimport good from '@/api/good';\nimport GoodCard from '@/components/GoodCard.vue';\n\nexport default {\n  components: {\n    GoodCard,\n  },\n  data() {\n    return {\n      all: true,\n      goodsList: [],\n      goodsCheckArr: [],\n      totalPrice: 0,\n      isLoading: false,\n      firstRender: true,\n    };\n  },\n  watch: {\n    goodsData: {\n      handler() {\n        const data = getStorage('goods') || [];\n        const goodsArr = Object.keys(data);\n        good.getGoodsByIds(goodsArr).then((res) => {\n          this.goodsList = res.list;\n          if (this.firstRender) {\n            this.goodsCheckArr.length = 0;\n            for (let i = 0; i < res.list.length; i += 1) {\n              this.goodsCheckArr.push(res.list[i].id);\n            }\n            this.firstRender = false;\n          }\n          this.initPrice(this.goodsCheckArr);\n          if (this.goodsCheckArr.length === 0) this.all = false;\n          setTimeout(() => {\n            this.isLoading = true;\n          }, 250);\n        });\n      },\n      immediate: true,\n    },\n    goodsDataLen() {\n      const arr = this.goodsCheckArr.filter((id) => this.goodsData[id]);\n      this.goodsCheckArr = arr;\n      this.onChange(arr);\n    },\n  },\n  computed: {\n    ...mapState(['goodsData']),\n    ...mapGetters(['goodsDataLen']),\n  },\n  methods: {\n    onChange(arr) {\n      if (this.goodsCheckArr.length === this.goodsDataLen) {\n        this.all = true;\n      } else {\n        this.all = false;\n      }\n      this.initPrice(arr);\n    },\n    onRemove() {\n      if (this.all) {\n        this.$dialog.confirm({\n          message: '您是否要删除全部的商品',\n          confirmButtonColor: '#1989fa',\n          className: 'dialog',\n        }).then(() => {\n          this.$store.commit('removeStorageData', { key: 'goods' });\n        }, () => {});\n      } else if (this.goodsCheckArr.length !== 0) {\n        this.$dialog.confirm({\n          message: '您是否要已选中的商品',\n          confirmButtonColor: '#1989fa',\n          className: 'dialog',\n        }).then(() => {\n          this.$store.commit('removeStorageData', { key: 'goods', value: this.goodsCheckArr });\n        }, () => {});\n      } else {\n        this.$toast.fail('您没有要删除的商品');\n      }\n    },\n    selectAll() {\n      if (this.$refs.checkboxGroup) {\n        this.$refs.checkboxGroup.toggleAll(this.all);\n      } else {\n        this.$toast.fail('您没有商品');\n        this.all = false;\n      }\n    },\n    onSubmit() {},\n    initPrice(arr) {\n      let price = 0;\n      arr.forEach((id) => {\n        this.goodsList.forEach((goodObj) => {\n          if (goodObj.id === id) {\n            price += goodObj.price * this.goodsData[id];\n          }\n        });\n      });\n      this.totalPrice = price * 100;\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n@import '~@/assets/css/px2rem.scss';\n\n.shop-cart {\n  background: #eee;\n  height: 100vh;\n\n  .card-list{\n    width: 100%;\n    box-sizing: border-box;\n    padding: px2rem(20) px2rem(20) px2rem(200);\n    margin-top: px2rem(92);\n    background-color: #fff;\n\n    .card-box{\n      display: flex;\n\n      .van-checkbox{\n        margin-right: px2rem(20);\n        flex-shrink: 0;\n      }\n    }\n  }\n\n  .card-none {\n    width: 100%;\n\n    img{\n      width: 100%;\n    }\n  }\n\n  .van-submit-bar{\n    bottom: px2rem(100);\n  }\n\n  .van-submit-bar{\n    .go{\n      color: #19A7E8;\n    }\n  }\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Cart.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Cart.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Cart.vue?vue&type=template&id=38503dae&scoped=true&\"\nimport script from \"./Cart.vue?vue&type=script&lang=js&\"\nexport * from \"./Cart.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Cart.vue?vue&type=style&index=0&id=38503dae&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"38503dae\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Cart.vue?vue&type=style&index=0&id=38503dae&lang=scss&scoped=true&\""],"sourceRoot":""}